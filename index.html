<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FitTrack Pro V9 Gamified</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/lucide/dist/lucide.min.js"></script>
</head>
<body class="bg-slate-100 font-sans">

<!-- NAVIGATION -->
<nav class="fixed bottom-0 w-full flex justify-around bg-white shadow-md py-2">
    <div class="nav-item flex flex-col items-center gap-1.5" data-tab="dashboard" onclick="switchTab('dashboard')">
        <div class="nav-bg w-12 h-8 rounded-full flex items-center justify-center"></div>
        <span class="text-[10px]">Dashboard</span>
    </div>
    <div class="nav-item flex flex-col items-center gap-1.5" data-tab="history" onclick="switchTab('history')">
        <div class="nav-bg w-12 h-8 rounded-full flex items-center justify-center"></div>
        <span class="text-[10px]">History</span>
    </div>
    <div class="nav-item flex flex-col items-center gap-1.5" data-tab="nutrition" onclick="switchTab('nutrition')">
        <div class="nav-bg w-12 h-8 rounded-full flex items-center justify-center"></div>
        <span class="text-[10px]">Nutrition</span>
    </div>
    <div class="nav-item flex flex-col items-center gap-1.5" data-tab="metrics" onclick="switchTab('metrics')">
        <div class="nav-bg w-12 h-8 rounded-full flex items-center justify-center"></div>
        <span class="text-[10px]">Metrics</span>
    </div>
    <div class="nav-item flex flex-col items-center gap-1.5" data-tab="achievements" onclick="switchTab('achievements')">
        <div class="nav-bg w-12 h-8 rounded-full flex items-center justify-center"></div>
        <span class="text-[10px]">Achievements</span>
    </div>
</nav>

<!-- DASHBOARD -->
<section id="dashboard" class="tab-content p-6 hidden">
    <h1 class="text-xl font-bold mb-4">Dashboard</h1>
    <div class="flex justify-between mb-4">
        <div>Calories: <span id="dash-calories">0</span></div>
        <div>Protein: <span id="dash-protein">0g</span></div>
        <div>Carbs: <span id="dash-carbs">0g</span></div>
        <div>Fat: <span id="dash-fat">0g</span></div>
    </div>
    <div class="flex justify-between mb-4">
        <div>Water: <span id="water-count">0/0 L</span></div>
        <div>Sessions: <span id="sessions-count">0</span></div>
        <div>Streak: <span id="streak-count">0</span></div>
    </div>
    <div id="tier-section" class="mb-4 p-3 bg-indigo-50 rounded-xl">
        <div>Tier: <span id="user-tier">Beginner</span> | Level: <span id="user-level">1</span> | XP: <span id="user-xp">0</span></div>
    </div>
    <button onclick="openTutorial()" class="px-4 py-2 bg-indigo-600 text-white rounded-xl">Open Tutorials</button>
</section>

<!-- HISTORY -->
<section id="history" class="tab-content p-6 hidden">
    <h1 class="text-xl font-bold mb-4">History</h1>
    <div class="flex mb-4">
        <button id="hist-tab-train" onclick="setHistoryTab('training')" class="flex-1 py-3 rounded-xl bg-white text-indigo-600">Training</button>
        <button id="hist-tab-nut" onclick="setHistoryTab('nutrition')" class="flex-1 py-3 rounded-xl text-slate-400">Nutrition</button>
    </div>
    <div id="history-list"></div>
</section>

<!-- NUTRITION -->
<section id="nutrition" class="tab-content p-6 hidden">
    <h1 class="text-xl font-bold mb-4">Nutrition</h1>
    <div class="flex mb-4">
        <button id="nut-tab-log" onclick="setNutritionTab('log')" class="flex-1 py-3 rounded-xl bg-white text-indigo-600">Log</button>
        <button id="nut-tab-db" onclick="setNutritionTab('database')" class="flex-1 py-3 rounded-xl text-slate-400">Database</button>
    </div>
    <div id="nut-view-log" class="nutrition-view">
        <input type="date" id="workout-date-input" class="mb-2">
        <div id="daily-log-list"></div>
        <div id="daily-totals-card" class="glass-card p-3 rounded-xl hidden">
            Total: <span id="total-day-cals">0</span>, Protein: <span id="total-day-prot">0g</span>
            <button onclick="archiveDailyNutrition()">Archive</button>
        </div>
    </div>
    <div id="nut-view-db" class="nutrition-view hidden">
        <input type="text" placeholder="Search food..." oninput="handleFoodSearch(this.value)">
        <div id="food-results" class="border rounded-lg mt-2 max-h-64 overflow-y-auto"></div>
        <div id="custom-db-list" class="mt-2"></div>
        <button onclick="openMealModal()">Create Meal</button>
    </div>
</section>

<!-- METRICS -->
<section id="metrics" class="tab-content p-6 hidden">
    <h1 class="text-xl font-bold mb-4">Metrics</h1>
    <div class="flex mb-4">
        <button id="metrics-tab-checkin" onclick="setMetricsTab('checkin')" class="flex-1 py-3 rounded-xl bg-white text-indigo-600">Check-in</button>
        <button id="metrics-tab-logs" onclick="setMetricsTab('logs')" class="flex-1 py-3 rounded-xl text-slate-400">Logs</button>
    </div>
    <div id="metrics-view-checkin">
        <input type="number" id="body-weight" placeholder="Weight (kg)" class="mb-2">
        <input type="number" id="m-waist" placeholder="Waist (cm)" class="mb-2">
        <button onclick="triggerPhoto('front')">Upload Front Photo</button>
        <button onclick="triggerPhoto('side')">Upload Side Photo</button>
        <button onclick="triggerPhoto('back')">Upload Back Photo</button>
        <button onclick="saveMetrics()">Save Metrics</button>
    </div>
    <div id="metrics-view-logs">
        <div id="metrics-logs-list"></div>
    </div>
    <input type="file" id="photo-input" accept="image/*" class="hidden" onchange="handlePhotoUpload(event)">
</section>

<!-- ACHIEVEMENTS -->
<section id="achievements" class="tab-content p-6 hidden">
    <h1 class="text-xl font-bold mb-4">Achievements</h1>
    <div id="achievements-list" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
</section>

<!-- TUTORIAL MODAL -->
<div id="tutorial-modal" class="modal hidden">
    <div class="modal-content">
        <button onclick="closeTutorial()">×</button>
        <div id="tutorial-list"></div>
    </div>
</div>

<!-- MEAL BUILDER MODAL -->
<div id="meal-modal" class="modal hidden">
    <div class="modal-content">
        <button onclick="closeMealModal()">×</button>
        <input type="text" id="meal-builder-name" placeholder="Meal Name">
        <input type="text" id="meal-item-search" placeholder="Search ingredients" oninput="handleMealSearch(this.value)">
        <div id="meal-search-results" class="max-h-64 overflow-y-auto border rounded-lg mt-2 hidden"></div>
        <div id="meal-builder-list" class="mt-2"></div>
        <div id="meal-totals" class="mt-2 hidden"><span id="meal-builder-stats"></span></div>
        <button onclick="saveMealToInventory()">Save Meal</button>
    </div>
</div>

<!-- PORTION MODAL -->
<div id="portion-modal" class="modal hidden">
    <div class="modal-content">
        <p>Logging <span id="portion-item-name"></span></p>
        <input type="number" id="portion-qty-input" value="1">
        <button onclick="confirmLogPortion()">Confirm</button>
        <button onclick="setPortionMode('packet')" id="p-mode-packet">Packet</button>
        <button onclick="setPortionMode('custom')" id="p-mode-custom">Custom</button>
    </div>
</div>

<!-- WORKOUT SETUP -->
<section id="workout-setup" class="tab-content p-6 hidden">
    <h2>Workout Setup</h2>
    <select id="workout-focus" onchange="toggleSpecificMuscleGrid()">
        <option>Full Body</option>
        <option>Upper Body</option>
        <option>Lower Body/Legs</option>
        <option>Specific Muscle</option>
    </select>
    <div id="muscle-selection-container" class="hidden">
        <div id="muscle-selection-grid" class="grid grid-cols-3 gap-2 mt-2"></div>
    </div>
    <label><input type="checkbox" id="add-cardio-check" onchange="toggleCardioOptions()"> Add Cardio</label>
    <div id="cardio-options" class="hidden">
        <select id="cardio-type"><option>Steady</option><option>HIIT</option></select>
        <input type="text" id="cardio-exercise" placeholder="Exercise Name">
    </div>
    <label><input type="checkbox" id="add-core-check" onchange="toggleCardioOptions()"> Add Core Finisher</label>
    <button onclick="startManualWorkout()">Start Workout</button>
</section>

<!-- WORKOUT ACTIVE -->
<section id="workout-active" class="tab-content p-6 hidden">
    <h2 id="active-workout-title"></h2>
    <div id="exercise-list"></div>
    <div id="extra-active-section"></div>
    <p>Timer: <span id="workout-timer">00:00:00</span></p>
    <button onclick="saveWorkout()">Save Workout</button>
    <button onclick="cancelWorkout()">Cancel Workout</button>
</section>

<script src="script.js"></script>
</body>
        </html>
